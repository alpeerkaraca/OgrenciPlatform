@{
    ViewBag.Title = "Giriş Yap";
    Layout = null;
}
@model OgrenciPortali.ViewModels.LoginUserViewModel

<!DOCTYPE html>
<html>
<head>
    <meta name="viewport" content="width=device-width"/>
    <link href="~/Content/bootstrap-lux.css" rel="stylesheet"/>
    <link href="~/Content/css/login-style.css" rel="stylesheet"/>


    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.13.1/font/bootstrap-icons.min.css">
</head>

<body>
<style>
    .form-control:focus { box-shadow: 0 0 0 0.15rem rgba(26, 26, 26, 0.25) !important; }
</style>
<div class="kenburns-bg">
    <img src="@Url.Content("~/Content/images/bg.jpg")" alt="Background"/>
</div>

<div class="container">
    <div class="row justify-content-center align-content-center" style="height: 90vh">
        <div class="col-md-6 col-lg-6 ">
            <div class="card rounded-2 shadow">
                <div class="card-header bg-primary text-white">
                    <h4 class="mb-0">
                        <i class="bi bi-person-add me-2"></i>Giriş Yap
                    </h4>
                </div>
                <div class="card-body d-flex align-content-center justify-content-center">
                    @using (Html.BeginForm("Login", "User", FormMethod.Post))
                    {
                        @*@Html.AntiForgeryToken()*@
                        @Html.ValidationSummary(false, "", new { @class = "text-danger", required = true })
                        <div class="row" id="form-area">
                            <div class="col-12 mb-3">
                                <label for="@Model.Email" class="form-label"><i class="bi bi-envelope me-1"></i>E-Posta</label>
                                @Html.TextBoxFor(model => model.Email, new { @class = "form-control", @placeholder = "E-Posta", autocomplete = "on" })
                                @*<input type="email" class="form-control" id="email" placeholder="E-Posta" autocomplete="on" style="" required="true" name="Email">*@
                            </div>

                            <div class="col-12 mb-3">
                                <label for="@Model.Password" class="form-label">
                                    <i class="bi bi-shield-lock me-1">Parola</i>
                                </label>
                                @Html.PasswordFor(model => model.Password, new { @class = "form-control", @placeholder = "Parola", autocomplete = "on" })
                                @*<input type="password" class="form-control" id="parola" placeholder="Parola" autocomplete="off" style="" required="true" name="Password">*@
                            </div>
                        </div>

                        <div>
                            <input type="submit" class="btn btn-primary w-100 text-center" value="Giriş Yap"/>
                        </div>
                    }
                </div>
            </div>
        </div>
    </div>
</div>
<script src="~/Scripts/jquery-3.7.1.js"></script>
<script src="~/Scripts/bootstrap.js"></script>
<script>
    // Bearer token management
    @if (TempData["BearerToken"] != null)
    {
        <text>
            sessionStorage.setItem('bearerToken', '@TempData["BearerToken"]');
        </text>
    }

// Setup AJAX to always include Bearer token
    $(document).ajaxSend(function(event, xhr, settings) {
        var token = sessionStorage.getItem('bearerToken');
        if (token && !settings.crossDomain) {
            xhr.setRequestHeader('Authorization', 'Bearer ' + token);
        }
    });

// Clear token on logout
    function clearBearerToken() {
        sessionStorage.removeItem('bearerToken');
    }
</script>

</body>
</html>