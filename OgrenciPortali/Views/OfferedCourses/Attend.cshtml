@model IEnumerable<OgrenciPortali.Models.OfferedCourse>
@{
    ViewBag.Title = "Ders Seçimi";
}

<div class="container mt-4">
    <div class="card shadow-sm">
        <div class="card-header">
            <h3>Aktif Dönem Dersleri</h3>
            <p class="mb-0">Aşağıdan almak istediğiniz dersleri seçerek ders kaydınızı tamamlayabilirsiniz.</p>
        </div>
        <div class="card-body">
            @if (!Model.Any())
            {
                <div class="alert alert-warning">Bu dönem için seçebileceğiniz ders bulunmamaktadır.</div>
            }
            else
            {
                using (Html.BeginForm("Enroll", "Student", FormMethod.Post))
                {
                    @*@Html.AntiForgeryToken()*@

                    <table id="attendCoursesTable" class="table table-striped table-bordered" style="width:100%">
                        <thead class="thead-dark">
                            <tr>
                                <th>Seç</th>
                                <th>Ders Kodu</th>
                                <th>Ders Adı</th>
                                <th>Kredi</th>
                                <th>Öğretmen</th>
                                <th>Gün ve Saat</th>
                            </tr>
                        </thead>
                        <tbody>
                            @foreach (var item in Model)
                            {
                                <tr>
                                    <td class="text-center">
                                        <input type="checkbox" name="selectedCourseIds" value="@item.Id" class="form-check-input" />
                                    </td>
                                    <td>@item.Course.CourseCode</td>
                                    <td>@item.Course.CourseName</td>
                                    <td class="text-center">@item.Course.Credits</td>
                                    <td>@item.Teacher.FullName</td>
                                    <td>@item.DayOfWeek, @item.StartTime.ToString(@"hh\:mm") - @item.EndTime.ToString(@"hh\:mm")</td>
                                </tr>
                            }
                        </tbody>
                    </table>

                    <div class="text-right mt-3">
                        <button type="submit" class="btn btn-lg btn-success">Seçilen Dersleri Kaydet</button>
                    </div>
                }
            }
        </div>
    </div>
</div>

@section scripts {
    <script>$(document).ready(function () {
            $('#attendCoursesTable').DataTable({
                language: {
                    url: '/Content/datatables/i18n/tr.json'
                },
                responsive: true,
                columnDefs: [
                    { "orderable": false, "searchable": false, "targets": 0 }
                ],
                order: [[1, 'asc']]
            });
        });</script>
}